import { Component, OnInit } from '@angular/core';import {Message, SelectItem} from "primeng/primeng";import {UnitInterface} from "../unit-interface";import {HttpClient, HttpErrorResponse} from "@angular/common/http";import {AddService} from "./add.service";@Component({  selector: 'app-add',  templateUrl: './add.component.html',  styleUrls: ['./add.component.scss'],  providers:[AddService]})export class AddComponent implements OnInit {  constructor(private http:HttpClient, private service:AddService) { }  organizations=[];  // test  items=[];  isHot:boolean;  // 上传图片组件  imgMsge:Message[];  uploadedFiles:any[]=[];  onUpload(event){    for(let file of event.files){      this.uploadedFiles.push(file);    }    this.imgMsge=[];    this.imgMsge.push({severity:'info',summary:'File Uploaded',detail:''});  }  fangs;tings;weis;yangtais;hxspecials:SelectItem[];  // 房屋类型  types:SelectItem[];  selectFang:SelectItem;  // 房屋朝向  orientation:SelectItem[];  // 房屋状态  state:SelectItem[];  // 提交方法  public onSubmit(form){    if(form.valid){      //转换'hxspecial'数据      let s1=form.value['hxspecial']      let s=''      for(let i in s1){        s+=s1[i]+','      }      form.value['hxspecial']=s      form.value['buildid']=4      console.log(form.value)      this.http.post('http://127.0.0.1:8000/unit/rw',form.value)      .subscribe()    }    else {      console.log(form.valid)    }  }  ngOnInit() {    this.fangs=this.service.fangs;    this.tings=this.service.tings;    this.weis=this.tings;    this.yangtais=this.tings;    this.types=this.service.types;    this.orientation=this.service.orientation;    this.state=this.service.state;    this.organizations=this.service.organizations;   // 获取户型特点数据    this.http.get<any>('http://127.0.0.1:8000/unit/hous-options')      .subscribe(data=>this.hxspecials=data);  }}